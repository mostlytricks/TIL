# Kafka 관련 기록

## 주요 어휘

### 레코드
- 타임스탬프, 
- 메시지 키, 
- 메시지 값(실제 데이터, 직렬화 되어 저장됨), 
- 오프셋(파티션에 저장시 레코드별 저장되는 번호)
으로 구성되는 데이터 저장단위.
파티션별로 offset을 각각 관리하지 않아, 메세지의 순서를 보장하지 못한다.

### 파티션
- 토픽에 속한 레코드를 실제 저장소에 저장하는 가장 작은 단위
- Append-only 
- 병렬 처리를 진행하는 단위

### 토픽
- 통상 데이터베이스의 테이블과 유사한 개념
- 토픽 저장시, 브로커가 지우기 전까지는 삭제되징 않음
- 토픽은 파티션 1개 이상
- 파티션이 많을 수록 병렬 처리량 늘릴 수 있음(컨슈머 그룹)

#### 토픽이름의 예제
<팀명>-<app명>-<용도>-<환경>
advertise-sender-notification-prod
android-application-sms-prod

#### 데이터 삭제
- 개별 삭제 불가 (Log로 데이터를 보는 관점)
- cleanup.policy=delete / cleanup.policy=compact

### 브로커
- 카프카 브로커 애플리케이션 -> 프로세스
- 데이터 복제, 삭제, 컨트롤러, 코디네이터 등

- 주키퍼는 카프카 운영에 필요한 메타데이터 관리

### 데이터 복제
- 리더 파티션 : 프로듀서, 컨슈머와 직접 통신하는 파티션, 브로커로 전송된 데이터는 최초 이곳에 저장
- 팔로워 파티션 : 리더 파티션을 복제하여 데이터 분산저장 목적

### 컨트롤러
- 브로커 중 하나
- 리더 파티션 선출

---
## 사용 예시


--- 
